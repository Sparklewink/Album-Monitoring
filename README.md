# 天枢监控 - 网易云数字专辑销量监控工具 💿

一款基于 Python 和 Tkinter 的图形化工具，专用于实时监控网易云音乐上指定数字专辑的销量。当销量达到或超过您设定的预警阈值时，它会立刻通过声音、桌面弹窗和微信推送（Server酱）向您发出警报。

![天枢监控软件截图](https://img11.360buyimg.com/ddimg/jfs/t1/339505/7/22191/77106/68f61eeaFc7600e59/7433b2756c3f0c7c.jpg)

---

## ✨ 功能特性

* **📈 实时销量监控**: 自动定时刷新，获取指定ID专辑的最新销量数据。
* **🖼️ 图形操作界面**: 简洁直观的 GUI 界面，所有配置项一目了然。
* **🔔 自定义预警**: 自由设定销量阈值，一旦达标立即触发警报。
* **多元化提醒**:
    * **🔊 声音警报**: 支持播放**多种音频格式** (如 `.mp3`, `.wav`, `.ogg` 等) 作为提示音。
    * **💻 桌面弹窗**: 在电脑屏幕上弹出醒目的警报窗口。
    * **📱 Server酱推送**: 通过 [Server酱](http://sct.ftqq.com/) 将通知推送到您的微信，让您随时随地掌握动态。
* **🌐 支持网络代理**: 可配置 HTTP/HTTPS 代理，以应对不同的网络环境。
* **💾 自动保存配置**: 关闭软件时，所有设置（包括窗口位置和大小）会自动保存到 `config.json` 文件中，下次打开时无需重新配置。
* **📄 详细执行日志**: 在界面上实时显示操作日志，方便追踪监控状态和排查问题。

---

## ⚙️ 运行环境要求

在运行此工具前，请确保您的电脑已经安装了以下环境和库：

1.  **Python 3**: 脚本基于 Python 3 编写 (建议 3.7 或更高版本)。
2.  **第三方库**: 您需要安装几个必要的 Python 库。

    打开您的终端（命令提示符或 PowerShell），运行以下命令来安装所有依赖：

    ```bash
    pip install requests pycryptodome just_playback
    ```
    *(我们使用 `just_playback` 库来支持多种音频格式)*

---

## 🚀 使用指南

1.  **下载文件**: 将 `main.py` 和 `netease_crypto.py` 这两个文件下载并放置在**同一个文件夹**中。
2.  **安装依赖**: 在该文件夹中打开终端，运行上一章节中的 `pip install` 命令。
3.  **运行程序**: 在终端中运行主程序：
    ```bash
    python main.py
    ```
4.  **填写配置**: 程序启动后，您会看到图形界面。请根据下面的说明填写必要信息。
5.  **开始监控**: 点击“开始监控”按钮，程序将根据您设定的间隔时间开始工作。

---

## 📝 配置项说明

* **代理地址**: (选填) 如果您需要通过代理服务器访问网络，请在此处填写，格式为 `http://127.0.0.1:10808`。如果不需要，请留空。
* **专辑 ID**: (必填) 您想要监控的数字专辑的唯一ID。
* **Cookie**: (必填) 您的网易云音乐登录凭证。这是**成功获取数据最关键**的一步。
* **检测间隔 (ms)**: (必填) 每次查询销量的间隔时间，单位是毫秒（例如，3000ms = 3秒）。**建议不要设置得太短**（如低于1000ms），以免对服务器造成压力或被临时屏蔽。
* **预警阈值 (张)**: (必填) 当销量**大于或等于**这个数字时，程序会触发警报并自动停止监控。
* **预警声音**: (选填) 点击“选择...”按钮，选择一个本地音频文件（支持 .mp3, .wav 等）。如果留空或文件无效，将不会有声音提醒。
* **Server酱 Token**: (选填) 从 [Server酱官网](http://sct.ftqq.com/) 登录并获取到的 `Token` (原名 SendKey)，填入此处即可开启微信推送功能。

---

## 🔑 如何获取专辑ID和Cookie？

### 获取专辑ID

1.  在浏览器中打开您想监控的网易云音乐数字专辑页面。
2.  观察浏览器地址栏中的URL，`id=` 后面的那一串数字就是专辑ID。
    > 例如，URL为 `https://music.163.com/#/album?id=280682247`，那么专辑ID就是 `280682247`。

### 获取Cookie

1.  使用浏览器（推荐Chrome或Edge）访问并**登录**您的网易云音乐账号 (https://music.163.com)。
2.  登录成功后，按 `F12` 键打开“开发者工具”。
3.  切换到 “网络 (Network)” 选项卡。
4.  刷新一下页面（或在页面上随便点击一个链接，例如“我的主页”）。
5.  在开发者工具的请求列表中，找到任意一个对 `music.163.com` 发起的请求（例如 `event` 或 `album`），点击它。
6.  在右侧出现的窗口中，找到“请求标头 (Request Headers)”部分。
7.  向下滚动找到 `Cookie:` 这一行，**复制它后面所有的文本内容**。
8.  将复制的完整 Cookie 粘贴到本工具的Cookie输入框中。

> ⚠️ **安全提示**: Cookie 包含了您的个人登录信息，非常敏感。请妥善保管，不要泄露给他人！本工具只会在本地使用您的Cookie，不会上传到任何地方。

---

## 💡 注意事项

* **Cookie时效性**: Cookie 会过期。如果日志中出现“鉴权失败”、“API返回数据异常”或返回 `{"code": -2, ...}` 等错误，通常意味着您需要按照上述步骤重新获取并更新Cookie。
* **API变更风险**: 本工具依赖于网易云音乐的内部API。如果未来官方API发生变动，本工具可能会失效。
* **负责任地使用**: 请合理设置检测间隔，避免对网易云服务器造成不必要的负担。本工具仅供学习和个人非商业用途。
